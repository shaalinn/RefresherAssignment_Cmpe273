<!DOCTYPE html>
<html>
<head>
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDuiDw7TZPGDoAhZO_ghj1ygRzp52V-mcw"></script>
    <title>Geo Location</title>
</head>
<body onload="getLocation()">

<p id="demo">your location.</p>

<button id="but">Click me for map</button>

<div id="mapholder" style="width:500px;height:380px;"></div>

<script>
    var but = document.getElementById("but");
    var x = document.getElementById("demo");
    var lat1;
    var lon;
    function initialize() {
        var mapProp = {
            center: new google.maps.LatLng(lat1,lon),
            zoom: 7,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map=new google.maps.Map(document.getElementById("mapholder"), mapProp);
        var myLatLng = {lat: parseInt(lat1), lng: parseInt(lon)};
        var marker = new google.maps.Marker({position: myLatLng, map: map});
    }

    google.maps.event.addDomListener(but, 'click', initialize);

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function showPosition(position) {
        lat1 = position.coords.latitude;
        lon = position.coords.longitude;
        var latlon = position.coords.latitude + "," + position.coords.longitude;
        x.innerHTML = position.coords.latitude +"<br>"+position.coords.longitude;
    }


</script>

</body>
</html>